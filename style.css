:root {
    --char-size: 26px;
    --fg: #00ff80;
    --bg: #000000;
  }
  
  * { box-sizing: border-box; margin: 0; padding: 0; }
  html, body { height: 100%; background: var(--bg); color: var(--fg); overflow: hidden; }
  body:focus {
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: ui-monospace, Menlo, Monaco, Consolas, monospace;
    position: relative;
    
  }
  
  /* seamless full-screen terminal */
  .terminal:focus  {
    position: relative;
    width: 100%;
    height: 100%;
    background: transparent; /* transparent for CRT overlay */

    border: none !important;
    outline: none !important;
    box-shadow: none !important;
  }
  
  /* --- MODIFIED: Added right boundary and overflow --- */
  .typing-line {
    position: absolute;
    top: 12px;
    left: 20px;
    
    /* NEW: Constrain the width */
    right: 230px; /* Make space for the mode indicator */
    
    word-wrap: break-word;

    font-size: var(--char-size);
    color: var(--fg);
    text-shadow: 0 0 6px var(--fg);
    z-index: 10;
  }
  
  .caret {
    display: inline-block; /* Allows it to flow with text */
    vertical-align: middle; /* Aligns it nicely with the text */

    width: 10px;
    height: 18px;
    background: var(--fg);
    margin-left: 3px;
    animation: blink 1s steps(2, end) infinite, flicker 80ms infinite;
    box-shadow: 0 0 4px var(--fg), 0 0 10px rgba(0,255,128,0.6);
  }
  @keyframes blink { 50% { opacity: 0; } }
  @keyframes flicker {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.25); }
  }
  
  /* canvas fills entire background */
  canvas {
    width: 100%;
    height: 100%;
    display: block;
    background: transparent; /* transparent background */

    border: none !important;
    outline: none !important;
    box-shadow: none !important;

   
  }
  
  /* global CRT overlay â€” sits ABOVE EVERYTHING */
  .crt-overlay {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 99999;
    background: repeating-linear-gradient(
      to bottom,
      rgba(0, 255, 128, 0.12) 0px,
      rgba(0, 0, 0, 0.25) 2px,
      rgba(0, 255, 128, 0.08) 3px,
      rgba(0, 0, 0, 0.3) 4px
    );
    opacity: 1; /* You increased this */
    mix-blend-mode: screen;
  }

/* --- Added styles for the escape screen --- */

#escape-overlay {
  position: fixed;
  inset: 0;
  background: transparent;
  
  /* Start hidden, will be shown with JS */
  display: none; 
  
  /* Center content */
  align-items: center;
  justify-content: center;
  flex-direction: column;
  
  /* Sit on top of everything except the CRT overlay */
  z-index: 99998; 
  
  /* Use the same terminal font */
  font-family: ui-monospace, Menlo, Monaco, Consolas, monospace;
}

#escape-text {
  color: white;
  font-size: 1.5em; /* 1.5x the base font size */
  text-shadow: 0 0 5px white;
}

#restart-button {
  /* Reset default button styles */
  background: transparent;
  outline: none;
  
  /* Old computer style */
  border: 2px solid white;
  color: white;
  
  /* Sizing and spacing */
  padding: 10px 20px;
  margin-top: 30px;
  
  /* Font */
  font-family: inherit;
  font-size: 1.2em;
  
  cursor: pointer;
  
  /* Smooth transition for the hover effect */
  transition: background-color 0.1s linear, color 0.1s linear;
}

#restart-button:hover {
  background: white; /* Fill with white */
  color: var(--bg);  /* Make text black */
}

/* --- END OF ESCAPE STYLES --- */


/* --- NEW: ADDED STYLES FOR MODE INDICATOR --- */

#mode-indicator {
  position: absolute;
  top: 12px;
  right: 20px;
  z-index: 10; /* Same level as typing-line */
  
  font-family: ui-monospace, Menlo, Monaco, Consolas, monospace;
  font-size: 16px; /* A bit smaller */
  color: var(--fg);
  text-shadow: 0 0 6px var(--fg);
  
  border: 2px solid var(--fg);
  padding: 7px 10px;
}

#mode-indicator span {
  border: 2px solid var(--fg);
  padding: 0 6px;
  margin-right: 4px;
}

/* --- END OF NEW STYLES --- */


/* This was the "fisheye" effect, I'm leaving it here commented out */
/*
body::after {
  content: '';
  position: fixed;
  inset: 0;
  border-radius: 30px / 50px; 
  box-shadow: 0 0 100px 80px var(--bg) inset; 
  pointer-events: none;
  z-index: 99998; 
}
*/